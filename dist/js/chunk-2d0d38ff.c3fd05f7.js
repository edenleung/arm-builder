(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d38ff"],{"5cfa":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-header-index-wide"},[a("a-card",{attrs:{"body-style":{padding:0}}},[a("div",{staticClass:"ant-pro-table-toolbar"},[a("div",{staticClass:"ant-pro-table-toolbar-title"},[e._v("部门列表")]),a("div",{staticClass:"ant-pro-table-toolbar-option"},[a("div",{staticClass:"ant-pro-table-toolbar-item"},[a("a-button",{attrs:{type:"primary",icon:"plus",loading:e.loading},on:{click:function(t){e.visible=!0}}},[e._v("新建")])],1),e.selectedRows.length?[a("div",{staticClass:"ant-pro-table-toolbar-item"},[a("a-dropdown",[a("a-menu",{attrs:{slot:"overlay"},on:{click:e.handleMenuClick},slot:"overlay"},[a("a-menu-item",{key:"remove"},[a("a-icon",{attrs:{type:"delete"}}),e._v("批量删除")],1)],1),a("a-button",{staticStyle:{"margin-left":"8px"}},[e._v(" 批量操作 "),a("a-icon",{attrs:{type:"down"}})],1)],1)],1)]:e._e(),a("a-divider",{attrs:{type:"vertical"}}),a("span",{staticClass:"ant-pro-table-toolbar-item-icon"},[a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[a("span",[e._v("刷新")])]),a("a-icon",{attrs:{type:"reload"},on:{click:function(t){return e.refreshTable()}}})],2)],1)],2)]),a("s-table",{ref:"table",attrs:{size:"default",rowKey:function(e){return e.dept_id},columns:e.columns,data:e.loadData,defaultExpandedRowKeys:[1,2,3]},scopedSlots:e._u([{key:"status",fn:function(t){return[1===t.dept_status?[e._v("正常")]:[e._v("禁用")]]}},{key:"tools",fn:function(t){return[t.dept_pid?a("span",[a("a",{directives:[{name:"action",rawName:"v-action:DeptUpdate",arg:"DeptUpdate"}],on:{click:function(a){return e.openDeptModal(t)}}},[e._v("编辑")]),a("a-divider",{attrs:{type:"vertical"}}),a("a",{directives:[{name:"action",rawName:"v-action:DeptDelete",arg:"DeptDelete"}],on:{click:function(a){return e.showDeleteConfirm(t.dept_id)}}},[e._v("删除")])],1):e._e()]}}])})],1),a("a-modal",{attrs:{title:"详情",visible:e.visible,width:500,confirmLoading:e.confirmLoading},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[a("a-form",{attrs:{form:e.form}},[a("a-form-item",{attrs:{label:"名称",labelCol:e.labelCol,wrapperCol:e.wrapperCol,hasFeedback:""}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["dept_name",{rules:[{required:!0,message:"请输入公司/部门名称!"}]}],expression:"[\n            'dept_name',\n            {\n              rules: [{ required: true, message: '请输入公司/部门名称!' }]\n            }\n          ]"}],attrs:{placeholder:"公司/部门名称"}})],1),a("a-form-item",{attrs:{label:"所属上级",labelCol:e.labelCol,wrapperCol:e.wrapperCol,hasFeedback:""}},[a("a-tree-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["dept_pid",{rules:[{required:!0,message:"请选择所属上级!"}]}],expression:"[\n            'dept_pid',\n            {\n              rules: [{ required: true, message: '请选择所属上级!' }]\n            }\n          ]"}],attrs:{dropdownStyle:{maxHeight:"400px",overflow:"auto"},treeData:e.tree,placeholder:"选择所属上级",treeDefaultExpandAll:""}})],1),a("a-form-item",{attrs:{label:"状态",labelCol:e.labelCol,wrapperCol:e.wrapperCol,hasFeedback:""}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["dept_status",{rules:[{required:!0,message:"请选择状态!"}]}],expression:"[\n            'dept_status',\n            {\n              rules: [{ required: true, message: '请选择状态!' }]\n            }\n          ]"}],attrs:{placeholder:"请选择"}},[a("a-select-option",{attrs:{value:1}},[e._v("正常")]),a("a-select-option",{attrs:{value:0}},[e._v("禁用")])],1)],1)],1)],1)],1)},n=[],o=(a("a4d3"),a("4de4"),a("e439"),a("dbb4"),a("b64b"),a("d3b7"),a("25f0"),a("159b"),a("ade3")),s=a("2af9"),i=a("b775");function l(e){return Object(i["b"])({url:"/system/dept",method:"get",params:e})}function c(e){return Object(i["b"])({url:"/system/dept",method:"post",data:e})}function d(e,t){return Object(i["b"])({url:"/system/dept/".concat(e),method:"put",data:t})}function p(e){return Object(i["b"])({url:"/system/dept/".concat(e),method:"delete"})}function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var m=[{title:"部门名称",dataIndex:"dept_name"},{title:"状态",scopedSlots:{customRender:"status"}},{title:"操作",scopedSlots:{customRender:"tools"}}],b={data:function(){var e=this;return{description:"",loading:!1,visible:!1,value:"",tree:[],confirmLoading:!1,selected:0,columns:m,labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},form:this.$form.createForm(this),queryParam:{},loadData:function(t){return l(Object.assign(t,e.queryParam)).then((function(t){return e.tree=t.result.data,t.result}))},selectedRowKeys:[],selectedRows:[]}},components:{STable:s["r"]},methods:{openDeptModal:function(e){var t=this;this.visible=!0,this.selected=e.dept_id;var a=e;a.dept_pid=a.dept_pid.toString(),this.$nextTick((function(){t.form.setFieldsValue(f({},a))}))},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},handleMenuClick:function(){},expandIcon:function(e){var t=e.expanded,a=this.$createElement;return a("a-icon",!0===t?{attrs:{type:"down"}}:{attrs:{type:"right"}})},handleSubmit:function(){var e=this;this.form.validateFields((function(t,a){if(!t){e.confirmLoading=!0;var r=0===e.selected?c(a):d(e.selected,a);r.then((function(t){e.$notification["success"]({message:"成功通知",description:0===e.selected?"添加成功！":"更新成功！"}),e.refreshTable(),e.handleCancel()})).finally((function(){e.confirmLoading=!1}))}}))},refreshTable:function(){this.$refs.table.refresh()},handleCancel:function(){this.visible=!1,this.selected=0,this.form.resetFields()},showDeleteConfirm:function(e){var t=this;this.$confirm({title:"确定删除此部门吗?",content:"",okText:"确定",okType:"danger",cancelText:"取消",onOk:function(){p(e).then((function(e){t.$notification["success"]({message:"成功通知",description:"删除成功！"}),t.refreshTable()}))}})}}},v=b,h=a("2877"),y=Object(h["a"])(v,r,n,!1,null,null,null);t["default"]=y.exports}}]);
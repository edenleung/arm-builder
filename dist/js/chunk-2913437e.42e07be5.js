(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2913437e"],{"1f66":function(e,t,a){"use strict";var r=a("b27a"),n=a.n(r);n.a},"5fed":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-header-index-wide"},[a("a-modal",{attrs:{title:e.selected?"修改菜单":"添加菜单",visible:e.visible,width:650,confirmLoading:e.confirmLoading},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[a("a-form",{attrs:{form:e.form,layout:"inline"}},[a("a-row",{attrs:{gutter:0}},[a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"菜单类型"}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["type",{rules:[{required:!0,message:"请选择类型!"}]}],expression:"[\n                'type',\n                {\n                  rules: [{ required: true, message: '请选择类型!' }]\n                }\n              ]"}]},e._l(e.typeMap,(function(t){return a("a-radio-button",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.text))])})),1)],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"上级类目",hasFeedback:""}},[a("a-tree-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["pid",{rules:[{required:!0,message:"请选择所属组别!"}]}],expression:"[\n                'pid',\n                {\n                  rules: [{ required: true, message: '请选择所属组别!' }]\n                }\n              ]"}],staticStyle:{"min-width":"171px"},attrs:{dropdownStyle:{maxHeight:"400px",overflow:"auto"},placeholder:"请选择所属组别",allowClear:"",treeDefaultExpandAll:"",treeData:e.tree},on:{change:e.handleTreeChange}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"菜单标题",hasFeedback:""}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title",{rules:[{required:!0,message:"请输入菜单标题!"}]}],expression:"[\n                'title',\n                {\n                  rules: [{ required: true, message: '请输入菜单标题!' }]\n                }\n              ]"}],attrs:{placeholder:"菜单标题"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"权限标识",hasFeedback:""}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"请输入唯一识别码!"}]}],expression:"[\n                'name',\n                {\n                  rules: [{ required: true, message: '请输入唯一识别码!' }]\n                }\n              ]"}],attrs:{placeholder:"唯一识别码",disabled:0!==this.selected}})],1)],1),a("a-col",{attrs:{span:24}},[a("a-col",{attrs:{span:12}},[a("a-form-item",{directives:[{name:"show",rawName:"v-show",value:"action"!==e.form.getFieldValue("type"),expression:"form.getFieldValue('type') !== 'action'"}],attrs:{label:"组件地址"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["component",{rules:[{required:"action"!==e.form.getFieldValue("type"),message:"请选择组件!"}]}],expression:"[\n                  'component',\n                  {\n                    rules: [{ required: form.getFieldValue('type') !== 'action', message: '请选择组件!' }]\n                  }\n                ]"}],staticStyle:{width:"171px"}},[e._v(" > "),e._l(e.Components,(function(t,r){return a("a-select-option",{key:r,attrs:{value:r}},[e._v(e._s(r))])}))],2)],1)],1),a("a-col",{directives:[{name:"show",rawName:"v-show",value:"action"!==e.form.getFieldValue("type"),expression:"form.getFieldValue('type') !== 'action'"}],attrs:{span:12}},[a("a-form-item",{attrs:{label:"路由地址",hasFeedback:""}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["path",{rules:[{required:"action"!==e.form.getFieldValue("type"),message:"请填写路由地址!"}]}],expression:"[\n                  'path',\n                  {\n                    rules: [{ required: form.getFieldValue('type') !== 'action', message: '请填写路由地址!' }]\n                  }\n                ]"}],attrs:{placeholder:"路由地址"}})],1)],1)],1),a("a-col",{attrs:{span:24}},[a("a-form-item",{directives:[{name:"show",rawName:"v-show",value:"path"===e.form.getFieldValue("type"),expression:"form.getFieldValue('type') === 'path'"}],attrs:{label:"Redirect"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["redirect",{rules:[{required:"path"===e.form.getFieldValue("type"),message:"请重定向地址!"}]}],expression:"[\n                'redirect',\n                {\n                  rules: [{ required: form.getFieldValue('type') === 'path', message: '请重定向地址!' }]\n                }\n              ]"}]})],1)],1),a("a-col",{attrs:{span:24}},[a("a-col",{attrs:{span:8}},[a("a-form-item",{attrs:{label:"菜单状态"}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{rules:[{required:!0,message:"请选择菜单状态!"}],initialValue:1}],expression:"[\n                  'status',\n                  {\n                    rules: [{ required: true, message: '请选择菜单状态!' }],\n                    initialValue: 1\n                  }\n                ]"}]},e._l(e.status,(function(t,r){return a("a-radio-button",{key:r,attrs:{value:t.value}},[e._v(e._s(t.label))])})),1)],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-item",{directives:[{name:"show",rawName:"v-show",value:"action"!==e.form.getFieldValue("type"),expression:"form.getFieldValue('type') !== 'action'"}],attrs:{label:"菜单缓存"}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["keepAlive",{rules:[{required:!0,message:"请选择菜单缓存!"}],initialValue:0}],expression:"[\n                  'keepAlive',\n                  {\n                    rules: [{ required: true, message: '请选择菜单缓存!' }],\n                    initialValue: 0\n                  }\n                ]"}]},e._l(e.status,(function(t,r){return a("a-radio-button",{key:r,attrs:{value:t.value}},[e._v(e._s(t.label))])})),1)],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-item",{directives:[{name:"show",rawName:"v-show",value:"action"!==e.form.getFieldValue("type"),expression:"form.getFieldValue('type') !== 'action'"}],attrs:{label:"菜单可见"}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["visable",{rules:[{required:!0,message:"请选择菜单可见!"}],initialValue:1}],expression:"[\n                  'visable',\n                  {\n                    rules: [{ required: true, message: '请选择菜单可见!' }],\n                    initialValue: 1\n                  }\n                ]"}]},e._l(e.status,(function(t,r){return a("a-radio-button",{key:r,attrs:{value:t.value}},[e._v(e._s(t.label))])})),1)],1)],1)],1),a("a-col",{attrs:{span:24}},[a("a-form-item",{directives:[{name:"show",rawName:"v-show",value:"action"!==e.form.getFieldValue("type"),expression:"form.getFieldValue('type') !== 'action'"}],attrs:{label:"查看权限"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["permission"],expression:"[\n                'permission'\n              ]"}],staticStyle:{"min-width":"171px"},attrs:{mode:"tags",placeholder:"选择查看权限"}})],1)],1),a("a-col",{attrs:{span:24}},[a("a-form-item",{directives:[{name:"show",rawName:"v-show",value:"action"!==e.form.getFieldValue("type"),expression:"form.getFieldValue('type') !== 'action'"}],attrs:{label:"菜单图标"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["icon"],expression:"[\n                'icon'\n              ]"}],staticStyle:{width:"171px"},attrs:{slot:"default"},slot:"default"},[a("a-icon",{attrs:{slot:"prefix",type:"search"},slot:"prefix"})],1)],1)],1)],1)],1)],1),a("a-card",{attrs:{"body-style":{padding:0}}},[a("div",{staticClass:"ant-pro-table-toolbar"},[a("div",{staticClass:"ant-pro-table-toolbar-title"},[e._v("规则列表")]),a("div",{staticClass:"ant-pro-table-toolbar-option"},[a("div",{staticClass:"ant-pro-table-toolbar-item"},[a("a-button",{directives:[{name:"action",rawName:"v-action:PermissionAdd",arg:"PermissionAdd"}],attrs:{type:"primary",icon:"plus"},on:{click:function(t){e.visible=!0}}},[e._v("新建")])],1),e.selectedRows.length?[a("div",{staticClass:"ant-pro-table-toolbar-item"},[a("a-dropdown",[a("a-menu",{attrs:{slot:"overlay"},on:{click:e.handleMenuClick},slot:"overlay"},[a("a-menu-item",{key:"remove"},[a("a-icon",{attrs:{type:"delete"}}),e._v("批量删除")],1)],1),a("a-button",{staticStyle:{"margin-left":"8px"}},[e._v(" 批量操作 "),a("a-icon",{attrs:{type:"down"}})],1)],1)],1)]:e._e(),a("a-divider",{attrs:{type:"vertical"}}),a("span",{staticClass:"ant-pro-table-toolbar-item-icon"},[a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[a("span",[e._v("刷新")])]),a("a-icon",{attrs:{type:"reload"},on:{click:function(t){return e.refreshTable()}}})],2)],1)],2)]),a("s-table",{ref:"table",attrs:{size:"default",rowKey:function(e){return e.id},columns:e.columns,data:e.loadData,alert:!0,showPagination:!1,rowSelection:{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange}},scopedSlots:e._u([{key:"actions",fn:function(t){return["menu"!==t.type?[e._v("-")]:e._l(t.actions,(function(t,r){return[a("a-popover",{key:r,attrs:{title:"详情",trigger:"click"}},[a("template",{slot:"content"},[a("div",{staticStyle:{"margin-bottom":"15px"}},[e._v("唯一识别码: "+e._s(t.name))]),a("a-button",{directives:[{name:"action",rawName:"v-action:PermissionUpdate",arg:"PermissionUpdate"}],staticStyle:{"margin-right":"10px"},attrs:{size:"small",type:"primary",ghost:""},on:{click:function(a){return e.openActionModal(t)}}},[e._v("编辑")]),a("a-button",{directives:[{name:"action",rawName:"v-action:PermissionDelete",arg:"PermissionDelete"}],attrs:{size:"small",type:"danger",ghost:""},on:{click:function(a){return e.showDeleteConfirm(t.id)}}},[e._v("删除")])],1),a("a-tag",[e._v(e._s(t.title))])],2)]}))]}},{key:"type",fn:function(t){return[a("a-tag",{attrs:{color:e._f("typeColorFilter")(t.type)}},[e._v(e._s(e._f("typeTextFilter")(t.type)))])]}},{key:"status",fn:function(t){return[a("a-badge",{attrs:{status:e._f("statusTypeFilter")(t.status),text:e._f("statusFilter")(t.status)}})]}},{key:"tools",fn:function(t){return[a("a",{directives:[{name:"action",rawName:"v-action:PermissionUpdate",arg:"PermissionUpdate"}],on:{click:function(a){return e.openActionModal(t)}}},[e._v("编辑")]),a("a-divider",{attrs:{type:"vertical"}}),a("a",{directives:[{name:"action",rawName:"v-action:PermissionDelete",arg:"PermissionDelete"}],on:{click:function(a){return e.showDeleteConfirm(t.id)}}},[e._v("删除")])]}}])})],1)],1)},n=[],i=(a("b0c0"),a("d3b7"),a("ac1f"),a("1276"),a("2af9")),s=a("cc07"),o=(a("99af"),a("b775")),l=a("365c");function c(e){return Object(o["b"])({url:l["a"].Permission,method:"get",params:e})}function u(e){return Object(o["b"])({url:l["a"].Permission,method:"post",data:e})}function d(e,t){return Object(o["b"])({url:"".concat(l["a"].Permission,"/").concat(e),method:"put",data:t})}function m(e){return Object(o["b"])({url:"".concat(l["a"].Permission,"/").concat(e),method:"delete"})}var p=[{label:"是",value:1},{label:"否",value:0}],v=[{title:"话题",children:[{title:"AntDesign",count:1e4},{title:"AntDesign UI",count:10600}]},{title:"问题",children:[{title:"AntDesign UI 有多好",count:60100},{title:"AntDesign 是啥",count:30010}]},{title:"文章",children:[{title:"AntDesign 是一个设计语言",count:1e5}]}],f={0:{status:"default",text:"已禁用"},1:{status:"processing",text:"使用中"}},h={path:{value:"path",text:"目录",color:"purple"},menu:{value:"menu",text:"菜单",color:"blue"},action:{value:"action",text:"按钮",color:"cyan"}},g=[{title:"唯一识别码",dataIndex:"name"},{title:"菜单名称",dataIndex:"title"},{title:"可操作权限",scopedSlots:{customRender:"actions"}},{title:"类型",scopedSlots:{customRender:"type"}},{title:"状态",scopedSlots:{customRender:"status"}},{title:"操作",scopedSlots:{customRender:"tools"}}],y={data:function(){var e=this;return{description:"列表使用场景：后台管理中的权限管理以及角色管理，可用于基于 RBAC 设计的角色权限控制，颗粒度细到每一个操作类型。",columns:g,typeMap:h,labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},queryParam:{},loadData:function(t){return c(Object.assign(t,e.queryParam)).then((function(t){t=t.result;var a=t,r=a.tree;return e.tree=r,t}))},loading:!1,visible:!1,confirmLoading:!1,form:this.$form.createForm(this),info:{},tree:[],selected:0,selectedRowKeys:[],selectedRows:[],dataSource:v,status:p,Components:s["a"]}},components:{STable:i["r"]},filters:{statusFilter:function(e){return f[e].text},statusTypeFilter:function(e){return f[e].status},typeTextFilter:function(e){return h[e].text},typeColorFilter:function(e){return h[e].color}},methods:{openActionModal:function(e){var t=this;this.visible=!0,this.selected=e.id,this.$nextTick((function(){var a=e.name,r=e.title,n=e.pid,i=e.type,s=e.status,o=e.path,l=e.redirect,c=e.component,u=e.icon,d=e.permission,m=e.keepAlive,p=e.hidden;t.form.setFieldsValue({name:a,title:r,pid:n,type:i,status:s,path:o,redirect:l,component:c,icon:u,keepAlive:m,hidden:p,permission:d?d.split(","):[]})}))},handleSubmit:function(){var e=this;this.form.validateFields((function(t,a){if(!t){e.confirmLoading=!0;var r=0===e.selected?u(a):d(e.selected,a);r.then((function(t){e.$notification["success"]({message:"成功通知",description:0===e.selected?"添加成功！":"更新成功！"}),e.refreshTable(),e.handleCancel()})).finally((function(){e.confirmLoading=!1}))}}))},handleCancel:function(){this.visible=!1,this.selected=0,this.form.resetFields()},showDeleteConfirm:function(e){var t=this;this.$confirm({title:"确定删除此规则吗?",content:"",okText:"确定",okType:"danger",cancelText:"取消",onOk:function(){m(e).then((function(e){t.$notification["success"]({message:"成功通知",description:"删除成功！"}),t.refreshTable()}))}})},refreshTable:function(){this.$refs.table.refresh()},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},handleMenuClick:function(e){var t=e.key;switch(t){case"remove":}},handleTreeChange:function(e){}}},b=y,w=(a("1f66"),a("2877")),x=Object(w["a"])(b,r,n,!1,null,"72886240",null);t["default"]=x.exports},b27a:function(e,t,a){}}]);